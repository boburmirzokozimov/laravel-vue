import{r as y,o as s,c as l,a as d,w as v,u as k,b as t,F as p,i as _,Z as I,t as n,d as S,e as b,g as O,f as u,k as g,O as N,A}from"./app-406a255e.js";import{P as B}from"./Paginator-19307e15.js";import E from"./Filter-97a988a1.js";import T from"./InfoPopUp-34e04bfe.js";import{M as D}from"./Modal-d56cdfd0.js";/* empty css            */import"./lodash-b0e1dbfb.js";const V=t("title",null,"Balance Transactions",-1),F={class:"flex flex-col"},L={class:"sm:mx-0.5 lg:mx-0.5"},M={class:"py-2 inline-block mx-auto sm:px-6 lg:px-8 w-full"},j={class:"overflow-hidden"},P={class:"min-w-full"},$=t("thead",{class:"bg-gray-200 border-b"},[t("tr",null,[t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4",scope:"col"}," # "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4",scope:"col"}," Client "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4",scope:"col"}," Sum "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4",scope:"col"}," Type "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4",scope:"col"}," Status "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4",scope:"col"})])],-1),q={class:"bg-white border-b transition duration-300 ease-in-out hover:bg-gray-100"},G=["textContent"],H=["textContent"],R=["textContent"],U=["textContent"],W={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},Z=["onChange"],z=["selected","value","textContent"],J={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},K=["onClick"],Q=t("i",{class:"fa fa-eye text-white"},null,-1),X=[Q],Y=["onClick"],tt=t("i",{class:"fa fa-remove text-white"},null,-1),et=[tt],it={__name:"Balance",props:{balance_transactions:Object,transaction_statuses:Object,filters:Object},setup(a){const C=a,x=A({}),r=y(!1),c=y(null),m=(i,f)=>{N.post(`/transactions/${f}/status`,{status:i},{onSuccess:()=>{x.success("Статус изменён")},onError:e=>{x.error(e.message)},preserveScroll:!0})},w=i=>{c.value=i,r.value=!0},h=()=>{r.value=!1,c.value=null};return(i,f)=>(s(),l(p,null,[d(k(I),null,{default:v(()=>[V]),_:1}),d(E,{filters:a.filters},null,8,["filters"]),t("div",F,[t("div",L,[t("div",M,[t("div",j,[t("table",P,[$,t("tbody",null,[(s(!0),l(p,null,_(a.balance_transactions.data,e=>(s(),l("tr",q,[t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",textContent:n(e.id)},null,8,G),t("td",{class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap",textContent:n(e.client_name)},null,8,H),t("td",{class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap",textContent:n(e.sum)},null,8,R),t("td",{class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap",textContent:n(e.type)},null,8,U),t("td",W,[t("form",null,[t("select",{id:"category",class:"text-center border border-gray-200 p-2 w-full rounded-2xl",name:"category",onChange:S(o=>m(o.target.value,e.id),["prevent"])},[(s(!0),l(p,null,_(C.transaction_statuses,o=>b((s(),l("option",{selected:o===e.status,value:o,class:"text-center",textContent:n(o)},null,8,z)),[[O,o!=="SUCCESS"]])),256))],40,Z)])]),t("td",J,[e.status==="HOLD"||e.status==="WAITING"||e.status==="VERIFICATION"?(s(),l("button",{key:0,class:"btn-edit mr-2",onClick:()=>w(e.id)},X,8,K)):u("",!0),e.status==="HOLD"||e.status==="WAITING"||e.status==="VERIFICATION"?(s(),l("button",{key:1,class:"btn-danger",onClick:o=>m("CANCELED",e.id)},et,8,Y)):u("",!0),r.value&&e.id===c.value?(s(),g(D,{key:2,onClose:h})):u("",!0),r.value&&e.id===c.value?(s(),g(T,{key:3,balance_request:e,onClose:h},null,8,["balance_request"])):u("",!0)])]))),256))])])])])])]),d(B,{links:a.balance_transactions.links},null,8,["links"])],64))}};export{it as default};
