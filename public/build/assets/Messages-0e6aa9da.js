import h from"./Create-66c96a09.js";import{r as m,n as g,o,c as s,b as e,l as u,q as c,t as _,F as x,f,a as y,h as i}from"./app-be13ba30.js";/* empty css            */const b={class:"bg-gray-200 rounded-xl p-6"},v={class:"mt-6 mb-6"},k={class:"mt-6 text-2xl font-semibold italic"},C=["textContent"],$={key:0},w=["src"],j={key:1},B=["href"],N={key:2},O=["href"],V={key:3},S={controls:""},U=["src"],F=["src"],M=["textContent"],D={__name:"Messages",props:{chat_room:Object},setup(p){const r=p,a=Centrifugo.newSubscription(`fin_help:chat#${r.chat_room.client_id}`),l=m(!1);a.subscribe(),a.on("publication",function(n){r.chat_room.messages.push(n.data.message)}),a.on("join",function(n){console.log(l.value),l.value=!0}),a.on("leave",function(n){l.value=!1}),g(()=>{Centrifugo.removeSubscription(a)});const d=n=>n==="App\\Models\\User\\User";return(n,T)=>(o(),s("div",b,[e("div",v,[e("h2",k,[u(" Chat "),e("span",{class:c([l.value?"text-green-500":"text-gray-500","lowercase align-sub text-sm"]),textContent:_(l.value?"(Online)":"(Offline)")},null,10,C)])]),(o(!0),s(x,null,f(r.chat_room.messages,t=>(o(),s("div",{class:c([d(t.messageble_type)?"justify-end":"justify-start","flex"])},[e("div",{class:c([d(t.messageble_type)?"text-right rounded-tl-3xl rounded-tr-xl mr-2 rounded-bl-3xl bg-blue-400":"text-left rounded-tr-3xl rounded-tl-xl ml-2 rounded-br-3xl bg-gray-400","mb-2 py-3 px-4 max-w-2xl text-white"])},[t.type==="image"?(o(),s("div",$,[e("img",{src:`/storage/${t.message}`,alt:"image"},null,8,w)])):i("",!0),t.type==="doc"?(o(),s("div",j,[e("a",{href:`/storage/${t.message}`,class:"rounded-lg bg-gray-200 px-4 py-1",target:"_blank"}," Открыть Файл ",8,B)])):i("",!0),t.type==="pdf"?(o(),s("div",N,[e("a",{href:`/storage/${t.message}`,class:"rounded-lg bg-gray-200 px-4 py-1",target:"_blank"}," Открыть Файл ",8,O)])):i("",!0),t.type==="audio"?(o(),s("div",V,[e("audio",S,[e("source",{src:`/storage/${t.message}`,type:"audio/ogg"},null,8,U),e("source",{src:`/storage/${t.message}`,type:"audio/mpeg"},null,8,F),u(" Your browser does not support the audio element. ")])])):i("",!0),t.type?i("",!0):(o(),s("div",{key:4,textContent:_(t.message)},null,8,M))],2)],2))),256)),y(h,{chat_room_id:r.chat_room.id,client_id:r.chat_room.client_id},null,8,["chat_room_id","client_id"])]))}};export{D as default};
