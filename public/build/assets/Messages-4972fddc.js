import p from"./Create-94d87544.js";import{r as x,n as m,o,c as s,b as e,l as u,q as d,t as c,F as f,f as g,a as y,h as i}from"./app-7969a278.js";/* empty css            */const b={class:"bg-gray-200 rounded-xl p-6"},v={class:"mt-6 mb-6"},C={class:"mt-6 text-2xl font-semibold italic"},k=["textContent"],$={key:0},w=["src"],j={key:1},B=["href"],N={key:2},O=["href"],V={key:3},F={controls:""},S=["src"],T=["src"],U=["textContent"],M={class:"text-sm text-gray-500 mt-2"},q=["textContent"],z=["textContent"],L={__name:"Messages",props:{chat_room:Object},setup(h){const r=h,a=Centrifugo.newSubscription(`fin_help:chat#${r.chat_room.client_id}`),l=x(!1);a.subscribe(),a.on("publication",function(n){r.chat_room.messages.push(n.data.message)}),a.on("join",function(n){console.log(l.value),l.value=!0}),a.on("leave",function(n){l.value=!1}),m(()=>{Centrifugo.removeSubscription(a)});const _=n=>n==="App\\Models\\User\\User";return(n,A)=>(o(),s("div",b,[e("div",v,[e("h2",C,[u(" Chat "),e("span",{class:d([l.value?"text-green-500":"text-gray-500","lowercase align-sub text-sm"]),textContent:c(l.value?"(Online)":"(Offline)")},null,10,k)])]),(o(!0),s(f,null,g(r.chat_room.messages,t=>(o(),s("div",{class:d([_(t.messageble_type)?"justify-end":"justify-start","flex relative"])},[e("div",{class:d([_(t.messageble_type)?"text-right rounded-tl-3xl rounded-tr-xl mr-2 rounded-bl-3xl bg-blue-400":"text-left rounded-tr-3xl rounded-tl-xl ml-2 rounded-br-3xl bg-gray-400","mb-2 py-3 px-4 max-w-2xl text-white flex flex-col"])},[t.type==="image"?(o(),s("div",$,[e("img",{src:`/storage/${t.message}`,alt:"image"},null,8,w)])):i("",!0),t.type==="doc"?(o(),s("div",j,[e("a",{href:`/storage/${t.message}`,class:"rounded-lg bg-gray-200 px-4 py-1",target:"_blank"}," Открыть Файл ",8,B)])):i("",!0),t.type==="pdf"?(o(),s("div",N,[e("a",{href:`/storage/${t.message}`,class:"rounded-lg bg-gray-200 px-4 py-1",target:"_blank"}," Открыть Файл ",8,O)])):i("",!0),t.type==="audio"?(o(),s("div",V,[e("audio",F,[e("source",{src:`/storage/${t.message}`,type:"audio/ogg"},null,8,S),e("source",{src:`/storage/${t.message}`,type:"audio/mpeg"},null,8,T),u(" Your browser does not support the audio element. ")])])):i("",!0),t.type?i("",!0):(o(),s("div",{key:4,textContent:c(t.message)},null,8,U)),e("div",M,[t.created_at.isToday?(o(),s("div",{key:0,textContent:c(t.created_at.diffForHumans)},null,8,q)):(o(),s("div",{key:1,textContent:c(t.created_at.formatted)},null,8,z))])],2)],2))),256)),y(p,{chat_room_id:r.chat_room.id,client_id:r.chat_room.client_id},null,8,["chat_room_id","client_id"])]))}};export{L as default};
