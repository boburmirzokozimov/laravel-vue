import h from"./Create-48714e3b.js";import{_ as x,r as m,n as g,o,c as s,b as e,l as u,q as d,t as i,F as f,f as y,a as b,h as c}from"./app-0a5c16ef.js";/* empty css            */const v={class:"bg-gray-200 rounded-xl p-6"},C={class:"mt-6 mb-6"},k={class:"mt-6 text-2xl font-semibold italic"},$=["textContent"],w={key:0},B=["src"],M={key:1},N=["href"],O={key:2},V=["href"],j={key:3},F={controls:""},S=["src"],T=["src"],U=["textContent"],q={class:"text-sm text-gray-500 mt-2"},z=["textContent"],A=["textContent"],D={__name:"Messages",props:{chat_room:Object},setup(p){const r=p,l=Centrifugo.newSubscription(`fin_help:chat#${r.chat_room.client_id}`),a=m(!1);l.subscribe(),l.on("publication",function(n){r.chat_room.messages.push(n.data.message)}).on("subscribing",function(n){console.log(a.value,n),a.value=!0}).on("unsubscribed",function(n){a.value=!1}),g(()=>{Centrifugo.removeSubscription(l)});const _=n=>n==="App\\Models\\User\\User";return(n,E)=>(o(),s("div",v,[e("div",C,[e("h2",k,[u(" Chat "),e("span",{class:d([a.value?"text-green-500":"text-gray-500","lowercase align-sub text-sm"]),textContent:i(a.value?"(Online)":"(Offline)")},null,10,$)])]),(o(!0),s(f,null,y(r.chat_room.messages,t=>(o(),s("div",{class:d([_(t.messageble_type)?"justify-end":"justify-start","flex relative"])},[e("div",{class:d([_(t.messageble_type)?"text-right rounded-tl-3xl rounded-tr-xl mr-2 rounded-bl-3xl bg-blue-400":"text-left rounded-tr-3xl rounded-tl-xl ml-2 rounded-br-3xl bg-gray-400","mb-2 py-3 px-4 max-w-2xl text-white flex flex-col dot"])},[t.type==="image"?(o(),s("div",w,[e("img",{src:`/storage/${t.message}`,alt:"image"},null,8,B)])):c("",!0),t.type==="doc"?(o(),s("div",M,[e("a",{href:`/storage/${t.message}`,class:"rounded-lg bg-gray-200 px-4 py-1",target:"_blank"}," Открыть Файл ",8,N)])):c("",!0),t.type==="pdf"?(o(),s("div",O,[e("a",{href:`/storage/${t.message}`,class:"rounded-lg bg-gray-200 px-4 py-1",target:"_blank"}," Открыть Файл ",8,V)])):c("",!0),t.type==="audio"?(o(),s("div",j,[e("audio",F,[e("source",{src:`/storage/${t.message}`,type:"audio/ogg"},null,8,S),e("source",{src:`/storage/${t.message}`,type:"audio/mpeg"},null,8,T),u(" Your browser does not support the audio element. ")])])):c("",!0),t.type?c("",!0):(o(),s("div",{key:4,textContent:i(t.message)},null,8,U)),e("div",q,[t.created_at.isToday?(o(),s("div",{key:0,textContent:i(t.created_at.diffForHumans)},null,8,z)):(o(),s("div",{key:1,textContent:i(t.created_at.formatted)},null,8,A))])],2)],2))),256)),b(h,{chat_room_id:r.chat_room.id,client_id:r.chat_room.client_id},null,8,["chat_room_id","client_id"])]))}},Y=x(D,[["__scopeId","data-v-22d56e87"]]);export{Y as default};
