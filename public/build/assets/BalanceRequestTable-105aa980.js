import{r as h,o as s,c as n,b as t,F as y,i as g,t as a,d as C,e as w,g as k,f as i,j as _,O as b,A as S}from"./app-f4cf12d7.js";import{M as A}from"./Modal-3a27b5ad.js";import B from"./InfoPopUp-d1634226.js";/* empty css            */const D={class:"flex flex-col"},O={class:"sm:mx-0.5 lg:mx-0.5"},E={class:"py-2 inline-block mx-auto sm:px-6 lg:px-8 w-full"},I={class:"overflow-hidden"},N={class:"min-w-full"},L=t("thead",{class:"bg-gray-200 border-b"},[t("tr",null,[t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4",scope:"col"}," # "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4",scope:"col"}," Date "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4",scope:"col"}," Sum "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4",scope:"col"}," Type "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4",scope:"col"}," Status "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4",scope:"col"}," Action ")])],-1),M={class:"bg-white border-b transition duration-300 ease-in-out hover:bg-gray-100"},T=["textContent"],j=["textContent"],F=["textContent"],G=["textContent"],H={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},U=["onChange"],V=["selected","value","textContent"],W={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},$=["onClick"],P=["onClick"],Q={__name:"BalanceRequestTable",props:{balance_requests:Object,transaction_statuses:Object},setup(d){const f=d,l=h(!1),c=h(null),p=S({}),v=r=>{c.value=r,l.value=!0},u=()=>{l.value=!1,c.value=null},x=(r,m)=>{b.post(`/transactions/${m}/status`,{status:r},{onSuccess:()=>{p.success("Статус изменён")},onError:e=>{p.error(e.message)},preserveScroll:!0})};return(r,m)=>(s(),n("div",D,[t("div",O,[t("div",E,[t("div",I,[t("table",N,[L,t("tbody",null,[(s(!0),n(y,null,g(d.balance_requests,e=>(s(),n("tr",M,[t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",textContent:a(e.id)},null,8,T),t("td",{class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap",textContent:a(e.created_at)},null,8,j),t("td",{class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap",textContent:a(e.sum)},null,8,F),t("td",{class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap",textContent:a(e.type)},null,8,G),t("td",H,[t("form",null,[t("select",{id:"category",class:"border border-gray-200 p-2 w-full rounded-2xl",name:"category",onChange:C(o=>x(o.target.value,e.id),["prevent"])},[(s(!0),n(y,null,g(f.transaction_statuses,o=>w((s(),n("option",{selected:o===e.status,value:o,textContent:a(o)},null,8,V)),[[k,o!=="SUCCESS"]])),256))],40,U)])]),t("td",W,[e.status==="HOLD"||e.status==="WAITING"?(s(),n("button",{key:0,class:"btn-edit",onClick:()=>v(e.id)},"Просмотр деталей ",8,$)):i("",!0),e.status==="HOLD"||e.status==="WAITING"?(s(),n("button",{key:1,class:"btn-danger",onClick:o=>x("CANCELED",e.id)},"Отменить ",8,P)):i("",!0),l.value&&e.id===c.value?(s(),_(A,{key:2,onClose:u})):i("",!0),l.value&&e.id===c.value?(s(),_(B,{key:3,balance_request:e,onClose:u},null,8,["balance_request"])):i("",!0)])]))),256))])])])])])]))}};export{Q as default};
